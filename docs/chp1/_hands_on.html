<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Warmup: Environment Setup - High Assurance Rust: Developing Secure and Robust Software</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">High Assurance Rust: Developing Secure and Robust Software</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/tnballo/high-assurance-rust" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://highassurance.rs/engage.html#submit-feedback-questions-issues-or-prs" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <meta name="title" content="High Assurance Rust">
<meta name="description" content="Developing Secure and Robust Software">
<meta property="og:title" content="High Assurance Rust">
<meta property="og:description" content="Developing Secure and Robust Software">
<meta property="og:type" content="article">
<meta property="og:url" content="https://highassurance.rs/">
<meta property="og:image" content="https://highassurance.rs/img/har_logo_social.png">
<meta name="twitter:title" content="High Assurance Rust">
<meta name="twitter:description" content="Developing Secure and Robust Software">
<meta name="twitter:url" content="https://highassurance.rs/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://highassurance.rs/img/har_logo_social.png">
<h1 id="warmup-environment-setup"><a class="header" href="#warmup-environment-setup">Warmup: Environment Setup</a></h1>
<blockquote>
<p><strong>WARNING:</strong> The book's container is currently not functional, we'll fix and add it to CI at a later time. Please setup your toolchain via another means, like a local install.</p>
</blockquote>
<p>In lieu of the usual chapter-end challenge, let's do a warm up: setting up the Rust toolchain.
What you'll need to write and compile Rust programs.
Consider this your bootstrap sequence!</p>
<p>This book is developed on a Linux host.
Throughout each chapter, you'll see commands you can retype (or copy/paste, note the button on the right) and execute.
In a code-block-listing format, like this:</p>
<pre><code class="language-ignore">whoami
</code></pre>
<p>The commands assume you're using a mainstream Linux distribution.
To follow along, you have two options:</p>
<ol>
<li>
<p><strong>Linux-native:</strong> Install each tool introduced on your host, using its current official documentation (we won't attempt to duplicate all installation instructions here) or your distro's package manager. Most of our tools have straightforward setups, often one or two commands.</p>
</li>
<li>
<p><strong>Docker container:</strong> If you're on a non-Linux platform, install Docker<sup class="footnote-reference" id="fr-Docker-1"><a href="#footnote-Docker">1</a></sup> (a popular containerization tool) and use this book's provided Dockerfile<sup class="footnote-reference" id="fr-BookDocker-1"><a href="#footnote-BookDocker">2</a></sup> to build a self-contained development environment.</p>
</li>
</ol>
<blockquote>
<p><strong>Note: Current State of the Container</strong></p>
<p>This book's container support is currently a work in progress.
In the future, the container will be automatically tested and detailed instructions for working with it will be added to the appendix.</p>
<p>Currently, we provide a simple Dockerfile within the book's repo<sup class="footnote-reference" id="fr-BookDocker-2"><a href="#footnote-BookDocker">2</a></sup>.</p>
</blockquote>
<p>Regardless of which route you choose, you'll want to verify your toolchain is working.</p>
<h2 id="try-the-toolchain"><a class="header" href="#try-the-toolchain">Try the Toolchain</a></h2>
<p><code>rustup</code> is the official installer and update manager for the Rust toolchain.
Among other pieces, it bundles Rust's:</p>
<ul>
<li>Compiler (<code>rustc</code>)</li>
<li>Package manager (<code>cargo</code>)</li>
<li>Standard library (<code>std</code>)</li>
</ul>
<p><code>rustup</code> can select toolchain components from three "channels": stable, beta, and nightly.
We'll cover the differences in Chapter 3.
It can also add components to cross-compile for other platforms.
We'll compile for an emulated ARM Cortex-M microcontroller in Chapter 8.</p>
<p>If not using the container, you can install <code>rustup</code> by following the instructions here:</p>
<ul>
<li><a href="https://www.rust-lang.org/tools/install">https://www.rust-lang.org/tools/install</a></li>
</ul>
<p>To verify the installation, execute the command:</p>
<pre><code class="language-ignore">rustup --version
</code></pre>
<p>Let's ensure you can compile and run a Rust program.
To create a new project named <code>hello_world</code>:</p>
<pre><code class="language-ignore">cargo new --bin hello_world
</code></pre>
<p>Running <code>tree hello_world</code> should show the following directory layout:</p>
<pre><code class="language-ignore">hello_world/
├── Cargo.toml
└── src
    └── main.rs

1 directory, 2 files
</code></pre>
<p><code>Cargo.toml</code> is a build configuration file.
You won't need to edit it to compile this program.
Take a look at the contents of <code>main.rs</code>, the sole source file:</p>
<pre><code class="language-ignore">cd hello_world
cat src/main.rs
</code></pre>
<p>A traditional "Hello, world!" program has been pre-populated:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!("Hello, world!");
}</code></pre></pre>
<p>To compile and run it, from with the <code>hello_world</code> directory, use:</p>
<pre><code class="language-ignore">cargo run
</code></pre>
<p>If you see the greeting printed to the console, you've got a working toolchain!</p>
<h2 id="add-rust-analyzer-to-your-ide-of-choice"><a class="header" href="#add-rust-analyzer-to-your-ide-of-choice">Add <code>rust-analyzer</code> to Your IDE of Choice</a></h2>
<p><code>rust-analyzer</code><sup class="footnote-reference" id="fr-RustAnalyzer-1"><a href="#footnote-RustAnalyzer">3</a></sup> is an implementation of the Language Server Protocol<sup class="footnote-reference" id="fr-LangProt-1"><a href="#footnote-LangProt">4</a></sup> for Rust.
It integrates with several editors and Integrated Development Environments (IDEs) to support conveniences like:</p>
<ul>
<li>Syntax/warning/error highlighting</li>
<li>Code completion</li>
<li>"Goto" functionality for definitions</li>
<li>Symbol renaming</li>
</ul>
<p>Workflow aids like these can boost productivity.
Both for newcomers to a language and for professionals working on large codebases.
While not a requirement, we strongly recommend installing <code>rust-analyzer</code> or an equivalent (several commercial IDEs offer similar Rust support).</p>
<p>To get started with <code>rust-analyzer</code>, see it's manual:</p>
<ul>
<li><a href="https://rust-analyzer.github.io/manual.html">https://rust-analyzer.github.io/manual.html</a></li>
</ul>
<h2 id="the-optional-docker-route"><a class="header" href="#the-optional-docker-route">The Optional Docker Route</a></h2>
<p>Docker<sup class="footnote-reference" id="fr-Docker-2"><a href="#footnote-Docker">1</a></sup> is a popular containerization tool.
Containers allow us to build and configure entire environments in a repeatable and reliable way:</p>
<ul>
<li>
<p>In <strong>industry</strong>, containers can package a networked application alongside its dependencies so it's ready to deploy on cloud infrastructure.</p>
</li>
<li>
<p>In <strong>academia</strong>, containers bundle prototypes and analyses so that research results can be independently reproduced.</p>
</li>
<li>
<p>In <strong>open-source software</strong>, containers automate building a project and thus reduce the entry barrier for current/future contributors.</p>
</li>
</ul>
<p>Our motivation is closest to the open-source use case.
Instead of setting up a container to build a specific project, we'll use a container pre-setup for developing Rust projects.</p>
<h3 id="but-i-want-to-learn-rust-not-docker"><a class="header" href="#but-i-want-to-learn-rust-not-docker">But I want to learn Rust, not Docker!</a></h3>
<p>Modern software development involves multiple tools and processes.
Docker solves problems that are orthogonal to those solved by any particular programming language.</p>
<p>In the context of this book, it'll give you a reliable, supported environment for running examples and completing hands-on challenges.
No "it worked on my machine" issues - you'll get the same hassle-free experience whether you're running Windows, Linux, or MacOS.</p>
<p>It's worth at least knowing how to build and run pre-existing Docker containers.
Which is the extent of our Docker coverage.
We won't cover advanced <code>docker</code> usage or writing <code>Dockerfiles</code>.
Or Docker internals, beyond the blurb below.</p>
<blockquote>
<p><strong>How does Docker actually work, in nutshell?</strong></p>
<p>Traditional Virtual Machines (VMs) provide isolation via duplication: they run an entire OS kernel, atop a [Type 2<sup class="footnote-reference" id="fr-Type2-1"><a href="#footnote-Type2">5</a></sup>] hypervisor, atop your system's kernel.
That's quite slow because now you're running two OS kernels, host and guest, plus glue software.</p>
<p>By contrast, a Linux Docker container on a Linux host leverages special features of the host kernel ("control groups"<sup class="footnote-reference" id="fr-Cgroups-1"><a href="#footnote-Cgroups">6</a></sup> and "namespaces"<sup class="footnote-reference" id="fr-Namespaces-1"><a href="#footnote-Namespaces">7</a></sup>) to isolate the container, as if it existed on a separate filesystem.
There's no duplication of kernels.</p>
<p>Relative to VMs, you can run isolated applications faster (throughput) and/or fit more on a single physical machine (density).</p>
</blockquote>
<h3 id="getting-started-with-the-books-docker-container"><a class="header" href="#getting-started-with-the-books-docker-container">Getting Started with the Book's Docker Container</a></h3>
<p>Platform-specific installation instructions for Docker are available here:</p>
<ul>
<li><a href="https://docs.docker.com/get-docker/">https://docs.docker.com/get-docker/</a></li>
</ul>
<p>The book's Dockerfile is available here:</p>
<ul>
<li><a href="https://github.com/tnballo/high-assurance-rust/blob/main/Dockerfile">https://github.com/tnballo/high-assurance-rust/blob/main/Dockerfile</a></li>
</ul>
<p>Your IDE of choice may offer a plugin for connecting to and/or managing containers.
For example, VSCode offers an official extension:</p>
<ul>
<li><a href="https://code.visualstudio.com/docs/remote/containers">https://code.visualstudio.com/docs/remote/containers</a></li>
</ul>
<h2 id="checkpoint"><a class="header" href="#checkpoint">Checkpoint</a></h2>
<p>Before proceeding, please ensure you've successfully compiled and run the above "Hello, world!" program.
Either natively or in a container.</p>
<p>We're going to write a more interesting program in the next chapter, you'll want a working toolchain to follow along.</p>
<hr>
<ol class="footnote-definition"><li id="footnote-Docker">
<p><a href="https://docs.docker.com/get-started/overview/"><em>Docker overview</em></a> Docker (Accessed 2022). <a href="#fr-Docker-1">↩</a> <a href="#fr-Docker-2">↩2</a></p>
</li>
<li id="footnote-BookDocker">
<p><a href="https://github.com/tnballo/high-assurance-rust/blob/main/Dockerfile">https://github.com/tnballo/high-assurance-rust/blob/main/Dockerfile</a> <a href="#fr-BookDocker-1">↩</a> <a href="#fr-BookDocker-2">↩2</a></p>
</li>
<li id="footnote-RustAnalyzer">
<p><a href="https://microsoft.github.io/language-server-protocol/"><em><code>rust-analyzer</code></em></a>. rust-analyzer (Accessed 2022). <a href="#fr-RustAnalyzer-1">↩</a></p>
</li>
<li id="footnote-LangProt">
<p><a href="https://microsoft.github.io/language-server-protocol/"><em><code>Language Server Protocol</code></em></a>. Microsoft (Accessed 2022). <a href="#fr-LangProt-1">↩</a></p>
</li>
<li id="footnote-Type2">
<p><a href="https://en.wikipedia.org/wiki/Hypervisor#Classification"><em>Hypervisor: Classification</em></a>. Wikipedia (Accessed 2022). <a href="#fr-Type2-1">↩</a></p>
</li>
<li id="footnote-Cgroups">
<p><a href="https://www.linuxjournal.com/content/everything-you-need-know-about-linux-containers-part-i-linux-control-groups-and-process"><em>Everything You Need to Know about Linux Containers, Part I: Linux Control Groups and Process Isolation</em></a>. Petros Koutoupis (2018). <a href="#fr-Cgroups-1">↩</a></p>
</li>
<li id="footnote-Namespaces">
<p><a href="https://www.linuxjournal.com/content/everything-you-need-know-about-linux-containers-part-ii-working-linux-containers-lxc"><em>Everything You Need to Know about Linux Containers, Part II: Working with Linux Containers (LXC)</em></a>. Petros Koutoupis (2018). <a href="#fr-Namespaces-1">↩</a></p>
</li>
</ol>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chp1/about_the_team.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chp2/_index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chp1/about_the_team.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chp2/_index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
